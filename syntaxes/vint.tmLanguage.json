{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Vint Programming Language",
    "scopeName": "source.vint",
    "fileTypes": ["vint"],
    "patterns": [
        { "include": "#shebang" },
        { "include": "#linecomments" },
        { "include": "#blockcomments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#constants" },
        { "include": "#declaratives" },
        { "include": "#keywords" },
        { "include": "#functions" },
        { "include": "#operators" },
        { "include": "#punctuation" },
        { "include": "#identifiers" },
        { "include": "#groups" }
    ],
    "repository": {
        "shebang": {
            "name": "comment.line.shebang.vint",
            "match": "^#!/.*$"
        },
        "linecomments": {
            "name": "comment.line.double-slash.vint",
            "match": "//.*$",
            "captures": {
                "0": { "name": "punctuation.definition.comment.vint" }
            },
            "patterns": [
                {
                    "name": "keyword.codetag.vint",
                    "match": "\\b(TODO|FIXME|XXX|NOTE|HACK|BUG)\\b"
                }
            ]
        },
        "blockcomments": {
            "name": "comment.block.vint",
            "begin": "/\\*",
            "end": "\\*/",
            "captures": {
                "0": { "name": "punctuation.definition.comment.vint" }
            },
            "patterns": [
                {
                    "name": "keyword.codetag.vint",
                    "match": "\\b(TODO|FIXME|XXX|NOTE|HACK|BUG)\\b"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.vint",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        { 
                            "name": "constant.character.escape.vint", 
                            "match": "\\\\[\"'\\\\nrtbf/]" 
                        },
                        { 
                            "name": "constant.character.escape.unicode.vint", 
                            "match": "\\\\u[0-9A-Fa-f]{4}" 
                        }
                    ]
                },
                {
                    "name": "string.quoted.single.vint",
                    "begin": "'",
                    "end": "'",
                    "patterns": [
                        { 
                            "name": "constant.character.escape.vint", 
                            "match": "\\\\[\"'\\\\nrtbf/]" 
                        }
                    ]
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.float.vint",
                    "match": "\\b\\d+\\.\\d+([eE][+-]?\\d+)?\\b"
                },
                {
                    "name": "constant.numeric.decimal.vint",
                    "match": "\\b\\d+([eE][+-]?\\d+)?\\b"
                },
                {
                    "name": "constant.numeric.hex.vint",
                    "match": "\\b0[xX][0-9A-Fa-f]+\\b"
                },
                {
                    "name": "constant.numeric.octal.vint",
                    "match": "\\b0[oO][0-7]+\\b"
                },
                {
                    "name": "constant.numeric.binary.vint",
                    "match": "\\b0[bB][01]+\\b"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "name": "constant.language.boolean.vint",
                    "match": "\\b(true|false)\\b"
                },
                {
                    "name": "constant.language.null.vint",
                    "match": "\\bnull\\b"
                }
            ]
        },
        "declaratives": {
            "name": "keyword.other.declarative.vint",
            "match": "\\b(todo|warn|error|info|debug|note|success|trace|fatal|critical|log|Todo|Warn|Error|Info|Debug|Note|Success|Trace|Fatal|Critical|Log)\\b"
        },
        "keywords": {
            "patterns": [
                {
                    "name": "storage.type.function.vint",
                    "match": "\\b(func|declare|return)\\b"
                },
                {
                    "name": "storage.type.variable.vint",
                    "match": "\\b(let|const)\\b"
                },
                {
                    "name": "storage.modifier.vint",
                    "match": "\\b(defer)\\b"
                },
                {
                    "name": "keyword.control.import.vint",
                    "match": "\\b(import|package|include|module)\\b"
                },
                {
                    "name": "keyword.control.conditional.vint",
                    "match": "\\b(if|else|elif)\\b"
                },
                {
                    "name": "keyword.control.loop.vint",
                    "match": "\\b(while|for|in|break|continue|repeat)\\b"
                },
                {
                    "name": "keyword.control.switch.vint",
                    "match": "\\b(switch|case|default|match)\\b"
                },
                {
                    "name": "keyword.control.exception.vint",
                    "match": "\\b(try|catch|throw|finally)\\b"
                },
                {
                    "name": "keyword.control.async.vint",
                    "match": "\\b(async|await|go|chan)\\b"
                },
                {
                    "name": "keyword.operator.type.vint",
                    "match": "\\b(as|is)\\b"
                }
            ]
        },
        "functions": {
            "patterns": [
                {
                    "name": "support.function.builtin.io.vint",
                    "match": "\\b(print|println|write|input)\\b"
                },
                {
                    "name": "support.function.builtin.type.vint",
                    "match": "\\b(type|typeof|convert|len|range)\\b"
                },
                {
                    "name": "support.function.builtin.typecheck.vint",
                    "match": "\\b(isInt|isFloat|isString|isBool|isArray|isDict|isNull)\\b"
                },
                {
                    "name": "support.function.builtin.string.vint",
                    "match": "\\b(split|join|replace|contains|startsWith|endsWith|trim|upper|lower|toUpper|toLower)\\b"
                },
                {
                    "name": "support.function.builtin.array.vint",
                    "match": "\\b(push|pop|shift|unshift|slice|splice|sort|reverse|append|unique|filter|map|indexOf)\\b"
                },
                {
                    "name": "support.function.builtin.dict.vint",
                    "match": "\\b(keys|values|hasKey|has_key)\\b"
                },
                {
                    "name": "support.function.builtin.math.vint",
                    "match": "\\b(abs|ceil|floor|round|max|min|sqrt|pow|random)\\b"
                },
                {
                    "name": "support.function.builtin.parse.vint",
                    "match": "\\b(parseInt|parseFloat)\\b"
                },
                {
                    "name": "support.function.builtin.logical.vint",
                    "match": "\\b(and|or|not|xor|nand|nor)\\b"
                },
                {
                    "name": "support.function.builtin.system.vint",
                    "match": "\\b(exec|env|args|exit)\\b"
                },
                {
                    "name": "entity.name.function.definition.vint",
                    "match": "(?<=let\\s+)[a-zA-Z_][a-zA-Z0-9_]*(?=\\s*=\\s*func)"
                },
                {
                    "name": "entity.name.function.call.vint",
                    "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)(?=\\s*\\()"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.comparison.vint",
                    "match": "(==|!=|<=|>=|<|>)"
                },
                {
                    "name": "keyword.operator.logical.vint",
                    "match": "(&&|\\|\\||!|\\?\\?|&|\\|)"
                },
                {
                    "name": "keyword.operator.arithmetic.vint",
                    "match": "(\\+\\+|\\-\\-|\\+|\\-|\\*\\*|\\*|\\/|%)"
                },
                {
                    "name": "keyword.operator.assignment.vint",
                    "match": "(\\+=|\\-=|\\*=|\\/=|%=|=)"
                },
                {
                    "name": "keyword.operator.arrow.vint",
                    "match": "=>"
                },
                {
                    "name": "keyword.operator.range.vint",
                    "match": "\\.\\."
                },
                {
                    "name": "punctuation.accessor.vint",
                    "match": "\\."
                }
            ]
        },
        "punctuation": {
            "patterns": [
                { 
                    "name": "punctuation.separator.comma.vint", 
                    "match": "," 
                },
                { 
                    "name": "punctuation.terminator.statement.vint", 
                    "match": ";" 
                },
                { 
                    "name": "punctuation.separator.colon.vint", 
                    "match": ":" 
                }
            ]
        },
        "identifiers": {
            "patterns": [
                {
                    "name": "support.constant.module.vint",
                    "match": "\\b(argparse|cli|clipboard|colors|crypto|csv|datetime|desktop|dotenv|editor|email|encoding|errors|filewatcher|hash|http|json|llm|logger|math|mysql|net|openai|os|path|postgres|random|reflect|regex|schedule|shell|sqlite|string|styled|sysinfo|term|time|url|uuid|vintchart|vintsocket|xml|yaml)\\b"
                },
                {
                    "name": "variable.other.constant.vint",
                    "match": "\\b[A-Z][A-Z0-9_]*\\b"
                },
                {
                    "name": "variable.other.vint",
                    "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
                }
            ]
        },
        "groups": {
            "patterns": [
                {
                    "name": "punctuation.definition.block.vint",
                    "match": "[{}]"
                },
                {
                    "name": "punctuation.definition.group.vint",
                    "match": "[()]"
                },
                {
                    "name": "punctuation.definition.array.vint",
                    "match": "[\\[\\]]"
                }
            ]
        }
    }
}
